#!/bin/sh

apt-get update
apt-get -qqy install autoconf automake build-essential g++ cmake libtool \
    && curl -sSL https://github.com/libuv/libuv/archive/v${LIBUV_VERSION}.tar.gz | tar zxfv - -C /usr/local/src \
    && cd /usr/local/src/libuv-$LIBUV_VERSION \
    && sh autogen.sh && ./configure --prefix=/app/libuv && make && make install \
    && rm -rf /usr/local/src/libuv-$LIBUV_VERSION \
    && ldconfig \
    && apt-get -y --purge autoremove autoconf automake build-essential libtool
    
apt-get -qqy install make libicu-dev

gem install charlock_holmes -- --with-icu-lib=/usr/lib/x86_64-linux-gnu --with-icu-include=/usr/include/x86_64-linux-gnu
chmod a+r -R /app/src/public/images/emoji
